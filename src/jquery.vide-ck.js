!function(e,t){typeof define=="function"&&define.amd?define(["jquery"],t):typeof exports=="object"?t(require("jquery")):t(e.jQuery)}(this,function(e){"use strict";function r(e){var t={},n,r,i,s,o,u,a;o=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(",");for(a=0,u=o.length;a<u;a++){r=o[a];if(r.search(/^(http|https|ftp):\/\//)!==-1||r.search(":")===-1)break;n=r.indexOf(":");i=r.substring(0,n);s=r.substring(n+1);s||(s=undefined);typeof s=="string"&&(s=s==="true"||(s==="false"?!1:s));typeof s=="string"&&(s=isNaN(s)?s:+s);t[i]=s}return i==null&&s==null?e:t}function i(e){e=""+e;var t=e.split(/\s+/),n="50%",r="50%",i,s,o;for(o=0,i=t.length;o<i;o++){s=t[o];s==="left"?n="0%":s==="right"?n="100%":s==="top"?r="0%":s==="bottom"?r="100%":s==="center"?o===0?n="50%":r="50%":o===0?n=s:r=s}return{x:n,y:r}}function s(t,n){var r=function(){n(this.src)};e('<img src="'+t+'.gif">').load(r);e('<img src="'+t+'.jpg">').load(r);e('<img src="'+t+'.jpeg">').load(r);e('<img src="'+t+'.png">').load(r)}function o(t,i,s){this.$element=e(t);typeof i=="string"&&(i=r(i));s?typeof s=="string"&&(s=r(s)):s={};if(typeof i=="string")i=i.replace(/\.\w*$/,"");else if(typeof i=="object")for(var o in i)i.hasOwnProperty(o)&&(i[o]=i[o].replace(/\.\w*$/,""));this.settings=e.extend({},n,s);this.path=i;this.init()}var t="vide",n={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",posterType:"detect",resizing:!0};o.prototype.init=function(){var n=this,r=i(n.settings.position),o="",u;n.$wrapper=e("<div>").css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-repeat":"no-repeat","background-position":r.x+" "+r.y});u=n.path;typeof n.path=="object"&&(n.path.poster?u=n.path.poster:n.path.mp4?u=n.path.mp4:n.path.webm?u=n.path.webm:n.path.ogv&&(u=n.path.ogv));n.settings.posterType==="detect"?s(u,function(e){n.$wrapper.css("background-image","url("+e+")")}):n.settings.posterType!=="none"&&n.$wrapper.css("background-image","url("+u+"."+n.settings.posterType+")");n.$element.css("position")==="static"&&n.$element.css("position","relative");n.$element.prepend(n.$wrapper);if(typeof n.path=="object"){n.path.mp4&&(o+='<source src="'+n.path.mp4+'.mp4" type="video/mp4">');n.path.webm&&(o+='<source src="'+n.path.webm+'.webm" type="video/webm">');n.path.ogv&&(o+='<source src="'+n.path.ogv+'.ogv" type="video/ogv">');n.$video=e('<video id="mofo-video">'+o+"</video>")}else n.$video=e('<video id="mofo-video"><source src="'+n.path+'.mp4" type="video/mp4">'+'<source src="'+n.path+'.webm" type="video/webm">'+'<source src="'+n.path+'.ogv" type="video/ogg">'+"</video>");n.$video.prop({autoplay:n.settings.autoplay,loop:n.settings.loop,volume:n.settings.volume,muted:n.settings.muted,defaultMuted:n.settings.muted,playbackRate:n.settings.playbackRate,defaultPlaybackRate:n.settings.playbackRate}).css({margin:"auto",position:"absolute","z-index":-1,top:r.y,left:r.x,"-webkit-transform":"translate(-"+r.x+", -"+r.y+")","-ms-transform":"translate(-"+r.x+", -"+r.y+")","-moz-transform":"translate(-"+r.x+", -"+r.y+")",transform:"translate(-"+r.x+", -"+r.y+")",visibility:"hidden"}).one("canplaythrough."+t,function(){n.resize()}).one("playing."+t,function(){n.$video.css("visibility","visible");n.$wrapper.css("background-image","none")});n.$element.on("resize."+t,function(){n.settings.resizing&&n.resize()});n.$wrapper.append(n.$video)};o.prototype.getVideoObject=function(){return this.$video[0]};o.prototype.resize=function(){if(!this.$video)return;var e=this.$video[0].videoHeight,t=this.$video[0].videoWidth,n=this.$wrapper.height(),r=this.$wrapper.width();r/t>n/e?this.$video.css({width:r+2,height:"auto"}):this.$video.css({width:"auto",height:n+2})};o.prototype.destroy=function(){this.$element.off(t);this.$video&&this.$video.off(t);delete e[t].lookup[this.index];this.$element.removeData(t);this.$wrapper.remove()};e[t]={lookup:[]};e.fn[t]=function(n,r){var i;this.each(function(){i=e.data(this,t);i&&i.destroy();i=new o(this,n,r);i.index=e[t].lookup.push(i)-1;e.data(this,t,i)});return this};e(document).ready(function(){var n=e(window);n.on("resize."+t,function(){for(var n=e[t].lookup.length,r=0,i;r<n;r++){i=e[t].lookup[r];i&&i.settings.resizing&&i.resize()}});n.on("unload."+t,function(){return!1});e(document).find("[data-"+t+"-bg]").each(function(n,r){var i=e(r),s=i.data(t+"-options"),o=i.data(t+"-bg");i[t](o,s)})})});